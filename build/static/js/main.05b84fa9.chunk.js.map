{"version":3,"sources":["components/classroom/ClassroomFooter.js","contexts/TextbookContext.js","components/textbooks/TextbookOutline.js","contexts/ImageContext.js","helpers/electronFileSystem.js","components/textbooks/TextbookSidebar.js","config.js","components/textbooks/DisplayImage.js","components/textbooks/EditorToolbar.js","components/textbooks/Editor.js","components/Button.js","components/textbooks/Field.js","components/textbooks/CodeLanguageSelectBox.js","components/textbooks/ImageContent.js","components/textbooks/DescContent.js","helpers/useInterval.js","components/textbooks/TextbookContentView.js","components/classroom/index.js","App.tsx","reportWebVitals.ts","index.tsx"],"names":["ClassroomFooter","maxIndex","stepIndicator","setStepIndicator","progressBarRef","useRef","handleIndicator","index","useEffect","current","style","width","progress","Math","round","className","ref","onClick","TextbookContext","createContext","stepIndex","itemIndex","setIndex","addStep","deleteStep","addItem","TextbookOutline","JSONBook","selectedInfo","useState","hoverStepIndex","setHoverStepIndex","hoverItemIndex","setHoverItemIndex","useContext","deleteItem","stepAddClick","smalltalk","prompt","then","value","console","log","catch","itemAddClick","e","textbook","textbookContents","textbook_contents","map","step_dict","textbookSteps","step_items","step","CurrentIndex","key","title","onMouseEnter","onMouseLeave","step_no","step_title","length","parseTextbook","ImageContext","imageLib","Map","store","window","require","saveTextbook","set","JSON","stringify","loadImage","name","get","TextbookSidebar","studentID","textbookOnClickCallback","onEditFunction","toggleSidebar","isOpen","textbookCompleteCallback","currentTextbook","setJSONBook","lastTextbook","viewType","setViewType","addImageLib","setImageLib","toBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","onFolderChange","event","a","os","files","target","folders","platform","path","split","binary","parse","loadTextbook","type","onChange","json","content","readAsText","text","document","createElement","Blob","href","URL","createObjectURL","download","body","appendChild","click","remove","directory","webkitdirectory","multiple","location","origin","DisplayImage","props","imgRef","useCallback","img","onImageChange","setSelectedImage","CustomUndo","viewBox","points","d","CustomRedo","Size","Quill","import","whitelist","register","Font","modules","toolbar","container","handlers","undo","this","quill","history","redo","delay","maxStack","userOnly","formats","QuillToolbar","id","defaultValue","Editor","EditorToolbar","handleChange","onFocus","handleFocus","onBlur","handleBlur","placeholder","theme","height","Button","children","size","color","fullWidth","fullHeight","autoHeight","displayNoneMobile","noRadius","hoverDisabled","outline","circled","active","noWrap","rest","classNames","defaultProps","React","memo","Field","fieldinput","setFieldinput","inputChange","autoFocus","rows","cols","onDoubleClick","CodeLanguageSelectBox","setCodeLanguage","options","option","ImageContent","components_item","count_for_key","selectedImage","ButtonGroup","image","useMemo","src","undefined","alt","reactHtmlParser","DescContent","description","rehypePlugins","rehypeRaw","useInterval","callback","savedCallback","setInterval","clearInterval","TextbookContentView","data","JSONLoading","setText","code","setCode","codeLanguage","addDescription","addCode","addImage","deleteDescription","addTable","isEditing","setIsEditing","lastText","setLastText","lastparseData","setLastParseData","parseData","components","description_title","step_item_descriptions","remarkPlugins","gfm","borderWidth","node","inline","match","exec","String","replace","materialLight","language","PreTag","card1","marginTop","newText","currentTarget","NewClassroom","Textbook","setTextbook","sidebarOpen","setSidebarOpen","stepsList","setStepsList","stepsListLength","setStepsListLength","tutorial","setStepIndex","setItemIndex","useReducer","x","forceUpdate","steps_list","forEach","concat","movePage","stepTitle","newBook","i","splice","itemTitle","new_textbook","prev","textbookContextValue","imageContextValue","Provider","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.05b84fa9.chunk.js","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport \"assets/css/PDFViewer.css\";\n\nconst ClassroomFooter = ({maxIndex, stepIndicator, setStepIndicator}) => {\n    const progressBarRef = useRef(null);\n    \n    const handleIndicator = (index)=>{\n        if (index >=0 && index < maxIndex){\n            setStepIndicator(index);\n        }\n    }\n\n    useEffect(()=>{\n        progressBarRef.current.style.width=\"0%\";\n    },[]);\n\n    useEffect(()=>{\n        if(progressBarRef){\n            let progress = ((stepIndicator+1) / maxIndex) * 100;\n            progressBarRef.current.style.width= Math.round(progress) + \"%\";\n        }\n    },[stepIndicator, maxIndex]);\n    \n    return(\n        <div className=\"classroom-footer\">\n            <div className=\"progress-bar-container\">\n                <div className=\"progress-bar\" ref={progressBarRef}/>\n            </div>\n            <div className=\"nav-bar\">\n                <div className={\"prev-button\" + (stepIndicator===0? \" disabled\" : \"\")} onClick={()=>{handleIndicator(stepIndicator-1)}}>이전</div>\n                <div className=\"offset-container\">{maxIndex? ((stepIndicator + 1) + '/' + maxIndex) : null}</div>\n                <div className={\"next-button\" + (stepIndicator===maxIndex-1? \" disabled\" : \"\")} onClick={()=>{handleIndicator(stepIndicator+1)}}>다음</div>\n            </div>\n        </div>\n    )\n    \n};\n\nexport default ClassroomFooter;\n","import React, { createContext, useMemo, useState } from 'react';\n\nexport const TextbookContext = createContext({\n  stepIndex: 0,\n  itemIndex: 0,\n  setIndex: () => {},\n  addStep: () => {},\n  deleteStep: () => {},\n  addItem: () => {},\n  deleteStep: () => {},\n  addDescription: () => {},\n  addImage: () => {},\n  addCode: () => {},\n  addTable: () => {},\n  deleteDescription: () => {}\n\n});","import React, { useCallback, useEffect, useRef, useState, useContext } from 'react';\nimport 'assets/sass/Curriculum/TextbookOutline.scss'\n// import { Collapse } from 'pages/main/MainPageComponents';\n// import Loader from 'guideComponents/Loader';\nimport { TextbookContext } from 'contexts/TextbookContext';\nimport smalltalk from 'smalltalk';\n\nconst TextbookOutline = ({\n    stepIndicator,\n    setStepIndicator,\n    JSONBook, \n    selectedInfo = null, \n}) =>{\n    const [hoverStepIndex, setHoverStepIndex] = useState(null);\n    const [hoverItemIndex, setHoverItemIndex] = useState(null);\n    const { setIndex, addStep, deleteStep, addItem, deleteItem } = useContext(TextbookContext);\n\n    const stepAddClick = (stepIndex) => {\n      smalltalk\n      .prompt('Question', '스탭 제목을 입력해주세요.', '')\n      .then((value) => {\n          console.log(value);\n          addStep(value, stepIndex+1)\n      })\n      .catch(() => {\n          console.log('cancel');\n      });\n    }\n\n    const itemAddClick = (stepIndex, itemIndex) => {\n      smalltalk\n      .prompt('Question', '아이템 제목을 입력해주세요.', '')\n      .then((value) => {\n          console.log(value);\n          addItem(value, stepIndex, itemIndex + 1)\n      })\n      .catch((e) => {\n          console.log(e)\n      });\n    }\n\n    const parseTextbook = (textbook) =>{\n        let index = -1\n        const textbookContents = textbook.textbook_contents.map((step_dict, stepIndex)=>{\n            const textbookSteps = step_dict.step_items.map((step, itemIndex)=>{\n                index +=1\n                const CurrentIndex = index;\n                if(stepIndicator==CurrentIndex) {\n                  setIndex(stepIndex, itemIndex);\n                }\n                return(\n                    <div key={step.title + CurrentIndex} className={\"textbook-step\" + (stepIndicator==CurrentIndex?\" current\" : \"\")}\n                        onClick={()=>{setStepIndicator(CurrentIndex)}} onMouseEnter={() => {setHoverItemIndex(itemIndex)}} onMouseLeave={() => {setHoverItemIndex(null)}}>\n                        - {step.title}\n                        \n                        {hoverItemIndex === itemIndex && hoverStepIndex === stepIndex &&\n                        <div>\n                          <button onClick={() => {itemAddClick(stepIndex, itemIndex)}}>아이템 추가</button>\n                          <button onClick={() => {deleteItem(stepIndex, itemIndex)}}>아이템 제거</button>\n                        </div>\n                      }\n                    </div>\n                )\n            })\n            return(\n                <>\n                  \n                  <div className=\"textbook-steps\" key={'textbook_steps_'+stepIndex} onMouseEnter={() => {setHoverStepIndex(stepIndex)}} onMouseLeave={() => {setHoverStepIndex(null)}}>\n                      <div className=\"textbook-step-title\"> Step {step_dict.step_no}. {step_dict.step_title}</div>\n                      <div className=\"textbook-step-container\">{textbookSteps}</div>\n                      {hoverStepIndex === stepIndex && !step_dict.step_items.length && <button onClick={() => {itemAddClick(stepIndex, 0)}}>아이템 추가</button>}\n                      {hoverStepIndex === stepIndex && \n                        <div>\n                          <button onClick={() => {stepAddClick(stepIndex)}}>스탭 추가</button>\n                          <button onClick={() => {deleteStep(stepIndex)}}>스탭 제거</button>\n                        </div>\n                      }\n                  </div>\n                </>\n            )\n        })\n        // if (!JSONBook ||  !selectedInfo || !selectedInfo.textbook_order_num){\n        //     return <Loader/>;\n        // }\n        return (\n            <div className = \"textbook-outline\">\n                {/* <div className=\"textbook-description\">\n                    <div className=\"level-description\">{selectedInfo.level_description}</div>\n                    <div className=\"textbook-title\">{selectedInfo?.textbook_order_num?.toString().padStart(2,'0')} {textbook.textbook_content.textbook_title} </div>\n                    <div className=\"textbook-badges\">\n                        <div>{textbook.textbook_content.textbook_subtitle.stage}</div>\n                        <div>{textbook.textbook_content.textbook_subtitle.language}</div>\n                        <div>LV.{textbook.textbook_content.textbook_subtitle.level}</div>\n                    </div>\n                </div> */}\n                <div className=\"textbook-contents\">\n                    {textbookContents}\n                </div>\n            </div>\n        )\n    }\n\n\n    // if (!JSONBook || !selectedInfo){\n    //     return <Loader/>;\n    // }\n    \n    return (\n      <>\n        <div>\n          <button onClick={() => {stepAddClick(-1)}}>스탭 추가</button>\n        </div>\n        {parseTextbook(JSONBook)}\n      </>\n    )\n\n}\n\nexport default TextbookOutline","import React, { createContext } from 'react';\n\nexport const ImageContext = createContext({\n  imageLib: new Map()\n});","import React from 'react';\n//import electron from 'electron';\n\nconst Store = window.require('electron-store');\nconst store = new Store();\n\nexport const saveTextbook = (JSONBook) => {\n  console.log(\"textbook saved!!\")\n  store.set('textbook', JSON.stringify(JSONBook));\n}\n\nexport const saveImage = (name, image) => {\n  try {\n    store.set(name, image);\n    console.log(\"saveImage\", name, \"successful\");\n  } catch (e) {\n    console.log(\"saveImage\", name , \"error\");\n  }\n  \n}\n\nexport const loadTextbook = () => {\n  try {\n    //console.log(JSON.parse(store.get('textbook')));\n    return JSON.parse(store.get('textbook'));\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nexport const loadImage = (name) => {\n  try {\n    //console.log(store.get(name));\n    return store.get(name);\n  } catch (e) {\n    console.log(name, e);\n    return null;\n  }\n  \n}\n\n// export const saveImage = () => {\n//   let image = new Image();\n//   image.src = \"/Users/eui-chan/Documents/tonysCoding/textbook_editor2/src/textbook/fillRect.png\"\n//   store.set('image', image);\n// }\n\n","import React, { useCallback, useEffect, useReducer, useState, useContext } from 'react';\nimport TextbookBrowser from \"./TextbookBrowser\";\nimport TextbookOutline from \"./TextbookOutline\";\n\nimport { ImageContext } from 'contexts/ImageContext';\n\nimport { saveImage, loadImage, saveTextbook, loadTextbook } from \"helpers/electronFileSystem\";\n// import { useSelector, shallowEqual } from 'react-redux';\n\n// import useApi from 'components/Hooks/useApi';\n\n// import { getTextbookLog, getTextbookIndex } from 'redux/actions/api_textbook';\n// import { getStudentInfo } from 'redux/actions/api_studentinfo';\n// import useGetCodeList from 'components/Hooks/useGetCodeList';\n// import { getTextbook, getCurriculumProgress, getCurriculumIndex } from 'redux/actions/api_textbook';\n// import Loader from 'guideComponents/Loader';\n\nimport 'assets/sass/Curriculum/TextbookSidebar.scss'\n// import useParseCodeToValue from 'components/Hooks/useParseCodeToValue';\n\nconst TextbookSidebar = ({\n    studentID=null, \n    textbookOnClickCallback=null,\n    onEditFunction=null,\n    toggleSidebar=null,\n    isOpen = true,\n    textbookCompleteCallback = null,\n    currentTextbook = null,\n    stepIndicator = 0,\n    setStepIndicator = null,\n    JSONBook = null, \n    setJSONBook = null,\n    lastTextbook = null,\n    }) =>{\n    // const [CurriculumIndexLoading, CurriculumIndex, CurriculumIndexError, getCurriculum] = useApi(getCurriculumIndex);\n    // const [CurriculumProgressLoading, CurriculumProgress, CurriculumProgressError, getCurrentProgress] = useApi(getCurriculumProgress);\n    // const [TextbookIndexLoading, TextbookIndex, TextbookIndexError, getTextbooks] = useApi(getTextbookIndex);\n    // const [CompletedTextbooksLoading, CompletedTextbooks, CompletedTextbooksError, getCompletedTextbooks] = useApi(getTextbookLog);\n    // const [studentInfoLoading, StudentInfo, StudentInfoError, getCurrentStudentInfo] = useApi(getStudentInfo);\n    \n    // const auth = useSelector(state => state.auth, shallowEqual);\n    \n    // const myStudentInfo = useSelector(state=>state.api_studentinfo.studentinfo);\n    // const receivedTextbook = useSelector(state=>state.api_textbook.textbook);\n\n    // const courseLevel = useGetCodeList('course_level');\n\n    const [viewType, setViewType] = useState(0);\n    const [selectedCourseLevel, setSelectedCourseLevel] = useState(\"002\");\n    const [selectedCourseID, setSelectedCourseID] = useState(null);\n    const [selectedTextbookLevel, setSelectedTextbookLevel] = useState(0);\n    const [selectedOrderNum, setSelectedOrderNum] = useState(0);\n\n    const { imageLib, setImageLib, addImageLib } = useContext(ImageContext);\n\n    const downloadJson = () => {\n      const saveText = JSON.stringify(JSONBook, null, \"\\t\");\n\n      // file setting\n      const text = saveText;\n      const name = \"textbook.json\";\n      const type = \"text/plain\";\n  \n      // create file\n      const a = document.createElement(\"a\");\n      const file = new Blob([text], { type: type });\n      a.href = URL.createObjectURL(file);\n      a.download = name;\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n      console.log(JSONBook)\n    }\n\n    const toBase64 = file => new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = error => reject(error);\n  });\n\n    const onFolderChange = async (event) => {\n      const os = window.require('os');\n      let files = event.target.files;\n      for(const file of files) {\n        let folders, name;\n        console.log(\"platform: \",os.platform())\n        if (os.platform() === \"win32\") {\n          folders = file.path.split('\\\\');\n          name = folders[folders.length-2] + \"/\" + folders[folders.length-1];\n        } else {\n          folders = file.path.split('/');\n          name = folders[folders.length-2] + \"/\" + folders[folders.length-1];\n        }\n        //saveImage(name, await toBase64(file));\n        const binary = await toBase64(file);\n        addImageLib(name, binary);\n        console.log(name);\n      }\n    }\n\n    const onJsonChange = (event) => {\n      var reader = new FileReader();\n      let json = event.target.files[0];\n\n      var success = function ( content ) {\n        console.log( JSON.parse(content) ); \n        setJSONBook(JSON.parse(content))\n      }\n      \n      reader.onload = function ( event ) { success( event.target.result ) };\n      reader.readAsText( json );\n\n     // console.log(JSON.parse(reader.result));\n    }\n\n\n    // useEffect(() => {\n    //     getCurriculum();\n    //     if (myStudentInfo){\n    //         getCurrentProgress(auth.user.id);\n    //         getCompletedTextbooks(auth.user.id);\n    //         if(lastTextbook){\n    //             setSelectedOrderNum(lastTextbook.order_num);\n    //             setCurrentLevel(lastTextbook.course, lastTextbook.level)\n    //         }\n    //     }\n    // }, []);\n\n    // useEffect(()=>{\n    //     if (lastTextbook&&CurriculumIndex) {\n    //         setSelectedOrderNum(lastTextbook.order_num);\n    //         setCurrentLevel(lastTextbook.course, lastTextbook.level)\n    //         for (const [code, courses] of Object.entries(CurriculumIndex)) {\n    //             let breaked = false;\n    //             for (const [course_id, course] of Object.entries(courses)) {\n    //                 if (course_id == lastTextbook.course) {\n    //                     setSelectedCourseLevel(code)\n    //                     handleLevelOnClick(course_id, lastTextbook.level)\n    //                     breaked = true;\n    //                     break;\n    //                 }\n    //             }\n    //             if (breaked) break;\n    //         }\n    //     }\n    // },[JSON.stringify(lastTextbook), JSON.stringify(CurriculumIndex)])\n\n    // useEffect(()=>{\n    //     if(studentID){\n    //         getCurrentStudentInfo(studentID);\n    //         getCurrentProgress(studentID);\n    //         getCompletedTextbooks(studentID);\n    //     }\n    // }, [studentID])\n\n    // useEffect(()=>{\n    //     if(CurriculumIndex && receivedTextbook){\n    //         for (const [code, courses] of Object.entries(CurriculumIndex)){\n    //             let breaked = false;\n    //             for (const [course_id, course] of Object.entries(courses)){\n    //                 if (course_id == receivedTextbook.course){\n    //                     setSelectedCourseLevel(code);\n    //                     breaked = true;\n    //                     break;\n    //                 }\n    //             }\n    //             if(breaked){\n    //                 break;\n    //             }\n    //         }\n    //         setSelectedOrderNum(receivedTextbook.order_num);\n    //         setCurrentLevel(receivedTextbook.course, receivedTextbook.level);\n    //         if(viewType !== 2){\n    //             setViewType(2);\n    //         }\n    //     }\n    // },[JSON.stringify(CurriculumIndex), JSON.stringify(receivedTextbook)])\n\n    // useEffect(()=>{\n    //     if(JSONBook){\n    //         setViewType(2);\n    //     }\n    // },[JSON.stringify(JSONBook)])\n\n\n\n    // useEffect(()=>{\n    //     if(CurriculumProgress && CurriculumIndex){\n    //         console.log(\"33333333333333333\", CurriculumProgress, CurriculumIndex)\n    //         let progress_course_id = CurriculumProgress[\"course_id\"];\n    //         if (CurriculumProgress[\"course_id\"] !== 0){\n    //             let breaked = false;\n    //             for (const [code, courses] of Object.entries(CurriculumIndex)){\n    //                 for (const [course_id, course] of Object.entries(courses)){\n    //                     if (course_id == progress_course_id){\n    //                         setSelectedCourseLevel(code);\n    //                         handleLevelOnClick(course_id, CurriculumProgress[\"textbook_level\"]);\n    //                         breaked = true;\n    //                         break;\n    //                     }\n    //                 }\n    //                 if(breaked){\n    //                     break;\n    //                 }\n    //             }\n    //         }\n    //     }\n    // }, [JSON.stringify(CurriculumProgress), JSON.stringify(CurriculumIndex)]);\n\n\n    // const handleLevelOnClick = (course_id, textbook_level) =>{\n    //     setCurrentLevel(course_id, textbook_level);\n    //     setViewType(1);\n    // }\n\n    // const setCurrentLevel = (course_id, textbook_level) =>{\n    //     let courseID = parseInt(course_id);\n    //     let textbookLevel = parseInt(textbook_level);\n    //     let request_data = {\n    //         \"course_id\" : courseID,\n    //         \"textbook_level\" : textbookLevel\n    //     };\n    //     setSelectedCourseID(courseID)\n    //     setSelectedTextbookLevel(textbookLevel)\n    //     getTextbooks(request_data);\n    // }\n\n    // const parseCurriculumIndex = (selectedIndex) =>{\n    //     let to_return = [];\n    //     for (const [course_id, course] of Object.entries(selectedIndex)){\n    //         let course_return = [];\n    //         let course_name = course['name'];\n    //         for (const [textbook_level, value] of Object.entries(course['content'])){\n    //             course_return.push(\n    //                 <div className=\"curriculum-level\" key={course_name + \"_level_\" +textbook_level} onClick={()=>{handleLevelOnClick(course_id,textbook_level)}}>\n    //                     <div className=\"curriculum-level-content\">\n    //                         <div className={\"level-badge badge-\"+textbook_level}>LV.{textbook_level}</div>\n    //                         <div className=\"curriculum-level-description\">{value}</div>\n    //                     </div>\n    //                     <div className=\"curriculum-level-goto\">\n    //                         <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    //                             <g id=\"expand_more_black_48dp\" transform=\"translate(0 24) rotate(-90)\">\n    //                                 <path id=\"패스_1041\" data-name=\"패스 1041\" d=\"M24,24H0V0H24Z\" fill=\"none\" opacity=\"0.87\"/>\n    //                                 <path id=\"패스_1042\" data-name=\"패스 1042\" d=\"M16.59,8.59,12,13.17,7.41,8.59,6,10l6,6,6-6Z\" fill=\"#757575\"/>\n    //                             </g>\n    //                         </svg>\n    //                     </div>\n    //                 </div>\n    //             );\n    //         }\n    //         to_return.push(\n    //             <div className=\"course-layout\" key={course_name}>\n    //                 <div className=\"course-title\">{course_name}</div>\n    //                 {course_return}\n    //             </div>\n    //         );\n    //     }\n    //     return to_return;\n    // }\n    // const calculateTopIndicator = ()=>{\n    //     if (textbookCompleteCallback){\n    //         return \"open\";\n    //     }\n    //     if (CurriculumProgress){\n    //         if (CurriculumProgress[\"course_level\"] < selectedCourseLevel){\n    //             return 0;\n    //         }\n    //         else if (CurriculumProgress[\"course_level\"] > selectedCourseLevel){\n    //             return \"open\";\n    //         }\n    //         else{\n    //             if (CurriculumProgress[\"course_id\"] == selectedCourseID){\n    //                 if(CurriculumProgress[\"textbook_level\"] > selectedTextbookLevel){\n    //                     return \"open\";\n    //                 }\n    //                 else if (CurriculumProgress[\"textbook_level\"] == selectedTextbookLevel){\n                        \n    //                     if (lastTextbook && lastTextbook.order_num > CurriculumProgress[\"order_indicator\"]) {\n    //                         return lastTextbook.order_num;\n    //                     }\n    //                     return CurriculumProgress[\"order_indicator\"] + 1;\n    //                 }\n    //                 else{\n    //                     return 0;\n    //                 }\n    //             }\n    //             else{\n    //                 return \"open\"\n    //             }\n    //         }\n    //     }\n\n    //     return \"open\";\n    // }\n\n    // const handleOnEdit = (data)=>{\n    //     onEditFunction({\n    //         ...data,\n    //         course_id:selectedCourseID\n    //     })\n    // }\n\n    // const handleTextbookOnClick = (data)=>{\n    //     setSelectedOrderNum(data.order_num);\n    //     textbookOnClickCallback(data);\n    //     if(viewType !== 2){\n    //         setViewType(2);\n    //     }\n    // }\n\n    // const generateTextbookOutlineInfo = () =>{\n    //     if (!selectedCourseLevel || selectedTextbookLevel==null) return null\n    //     let info = {\n    //         level_description:CurriculumIndex[selectedCourseLevel][selectedCourseID]?.content[selectedTextbookLevel],\n    //         textbook_order_num:selectedOrderNum\n    //     };\n    //     return info;\n    // }\n\n    // if (!CurriculumIndex){\n    //     return null;\n    // }\n    console.log(\"isopen\" , isOpen)\n\n\n\n    return (\n        <div className={\"textbook-sidebar\" + (isOpen? \"\" : \" closed\") + (textbookCompleteCallback? \" fixed\" : \"\")}>\n            <span className=\"material-icons-outlined textbook-sidebar-toggle\" onClick={()=>{toggleSidebar(false)}}>\n            close\n            </span>\n            {/* {(myStudentInfo || studentID) && (CurriculumProgressLoading || CurriculumIndexLoading) || viewType === 0? null: */}\n            <div className=\"textbook-prev\" onClick={()=>setViewType(viewType-1)}>\n                <span className=\"textbook-sidebar-back material-icons-outlined\">\n                    west\n                </span>\n            </div>\n            {/* {(myStudentInfo || studentID) && (CurriculumProgressLoading || CurriculumIndexLoading)? <Loader/> : viewType === 0? \n            <div className=\"course-level-container\">\n                <div className=\"course-level-browser\">\n                    {courseLevel.map((level, index) => {\n                        if (level.code >= '003'){\n                            return null;\n                        }\n                        return (\n                            <div className={\"course-badge badge-color\" + (index+1) + (level.code==selectedCourseLevel? \" clicked\" : \"\")} onClick={()=>{setSelectedCourseLevel(level.code)}} key={level.value+\"_\"+level.id} value={level.code}>{level.description}</div>\n                        )\n                    })}\n                </div>\n                <div>\n                    {\n                        parseCurriculumIndex(CurriculumIndex[selectedCourseLevel])\n                    }\n                </div>\n            </div>:\n            viewType === 1?\n            <TextbookBrowser \n                completedTextbooks = {CompletedTextbooks? CompletedTextbooks[\"detail\"] : []} \n                textbookDict = {TextbookIndexLoading? null : TextbookIndex}\n                textbookOnClickCallback = {textbookOnClickCallback? handleTextbookOnClick : null}\n                topOrderIndicator = {calculateTopIndicator()}\n                showTitle={true}\n                textbookCompleteCallback = {textbookCompleteCallback}\n                currentTextbook={currentTextbook || (lastTextbook)}\n                onEditFunction={onEditFunction? handleOnEdit:null}\n            />:\n            viewType === 2?  */}\n            <TextbookOutline stepIndicator={stepIndicator} setStepIndicator={setStepIndicator} selectedInfo={null} JSONBook={JSONBook}/>\n            <hr></hr>\n            {/* <button onClick={() => {saveTextbook(JSONBook)}}>저장</button> */}\n            <button onClick={() => {setJSONBook(loadTextbook())}}>퀵로드</button>\n            <br></br>\n            <hr></hr>\n            json파일 로드<input type=\"file\" name=\"json\" onChange={onJsonChange}/>\n            \n            <br></br>\n            <hr></hr>\n            <button onClick={downloadJson}> json 변환 </button>\n            <br></br>\n            <hr></hr>\n            이미지파일 한번에 업로드 : <input type=\"file\" name=\"myImage\" onChange={onFolderChange} directory=\"\" webkitdirectory=\"\" multiple=\"\"/>\n            {/* } */}\n        </div>\n    )\n\n}\n\nexport default TextbookSidebar","//Environment variables are injected in build-time (not accessible in development)\n\n// URL \n//export const API_URL = '127.0.0.1:8000';\n//export const API_PROTOCOL = \"http://\";\n//export const SOC_PROTOCOL = \"ws://\";\nexport const SOC_PROTOCOL = \"wss://\";\nexport const API_URL = 'www.topolar.co.kr';\n// export const API_URL = 'tonyscoding.com';\n// export const API_URL = 'kimbu.tonyscoding.com';\n// export const API_URL = 'tocol.info';\n// export const API_URL = 'localhost:8000';\n// export const API_URL = '192.168.0.13:8000';\n// export const API_URL = '192.168.1.3';\nexport const API_PROTOCOL = \"https://\";\n// export const API_PROTOCOL = \"http://\";\n//export const API_URL = 'tocol-444960480.ap-northeast-2.elb.amazonaws.com';\nexport const MEDIA_SERVER_URL = 'www.topolar.co.kr';\n// export const MEDIA_SERVER_URL = 'tonyscoding.com'\n// export const MEDIA_SERVER_URL = 'www.tocol.info'\n\n\n// TOCOL Price list\nexport const COURSE_BLACK = \"BLACK\";\nexport const COURSE_BLACK_CODE = \"BL\";\nexport const COURSE_NORMAL = \"NORMAL\";\nexport const COURSE_NORMAL_CODE = \"NO\";\n\nexport const STATIC_IP_ADDR = \"112.220.26.74\";\n// export const TURN_IP_ADDR = \"54.180.153.96\";\nexport const TURN_IP_ADDR = \"13.125.217.155\";\nexport const TURN_PASSWORD = \"yZ4d4eM3Cq\";\nexport const TURN_USERNAME = \"tonysacademy\";\n\n//  Classroom entry buffer time\nexport const CLASSROOM_ENTRY_TIME_BUFFER = 10;\n\n// Social Login Redirct uri\nexport const REDIRECT_URI_NAVER = \"/api/naver/social/login/callback/\";\nexport const REDIRECT_URI_FACEBOOK = \"/api/facebook/social/login/callback\";\nexport const REDIRECT_URI_KAKAO = \"/api/kakao/social/login/callback\";\nexport const REDIRECT_URI_GOOGLE = \"/api/google/social/login/callback\";\n\nexport const REDIRECT_URI_NAVER_AUTHENTICATE = \"/api/naver/social/authentication/callback/\";\nexport const REDIRECT_URI_FACEBOOK_AUTHENTICATE = \"/api/facebook/social/authentication/callback\";\nexport const REDIRECT_URI_KAKAO_AUTHENTICATE = \"/api/kakao/social/authentication/callback\";\nexport const REDIRECT_URI_GOOGLE_AUTHENTICATE = \"/api/google/social/authentication/callback\";\n\nconst NAVER_OAUTH_URL = \"https://nid.naver.com/oauth2.0/authorize\";\n// const FACEBOOK_OAUTH_URL = \"https://www.facebook.com/v8.0/dialog/oauth/\";\nconst KAKAO_OAUTH_URL = \"https://kauth.kakao.com/oauth/authorize\"\nconst GOOGLE_OAUTH_URL = \"https://accounts.google.com/o/oauth2/v2/auth\"\n\n\n// Social Login variables\nexport const SOCIAL_VARIABLES = {\n    naver: {\n        response_type: 'code',\n        client_id: API_URL==='www.topolar.co.kr'?'B2XvP5bEY2qQ3Aj2SpnJ':'qChFIQ5bqKM8sjPgJHT9',\n        redirect_uri: window.location.origin+REDIRECT_URI_NAVER,\n    },\n    // facebook: {\n    //     response_type: 'code',\n    //     client_id: '2390419097919426',\n    //     redirect_uri: window.location.origin+REDIRECT_URI_FACEBOOK,\n    //     scope: 'public_profile, email'\n    // },\n    kakao: {\n        response_type: 'code',\n        client_id: \"746bf258cf0d1ed175efddcbaf3608db\",\n        redirect_uri: window.location.origin + REDIRECT_URI_KAKAO,\n    },\n    google: {\n        response_type: 'code',\n        client_id: \"556593457930-1896adndgn3n09dis9o2bh413ocj427r.apps.googleusercontent.com\",\n        redirect_uri: window.location.origin + REDIRECT_URI_GOOGLE,\n        scope: \"https://www.googleapis.com/auth/userinfo.email\"\n    },\n    naverConnection: {\n        response_type: 'code',\n        client_id: API_URL==='www.topolar.co.kr'?'B2XvP5bEY2qQ3Aj2SpnJ':'qChFIQ5bqKM8sjPgJHT9',\n        redirect_uri: window.location.origin+REDIRECT_URI_NAVER_AUTHENTICATE,\n    },\n    // facebookConnection: {\n    //     response_type: 'code',\n    //     client_id: '2390419097919426',\n    //     redirect_uri: window.location.origin+REDIRECT_URI_FACEBOOK_AUTHENTICATE,\n    //     scope: 'public_profile, email'\n    // },\n    kakaoConnection: {\n        response_type: 'code',\n        client_id: \"746bf258cf0d1ed175efddcbaf3608db\",\n        redirect_uri: window.location.origin + REDIRECT_URI_KAKAO_AUTHENTICATE,\n    },\n    googleConnection: {\n        response_type: 'code',\n        client_id: \"556593457930-1896adndgn3n09dis9o2bh413ocj427r.apps.googleusercontent.com\",\n        redirect_uri: window.location.origin + REDIRECT_URI_GOOGLE_AUTHENTICATE,\n        scope: \"https://www.googleapis.com/auth/userinfo.email\"\n    },\n    naverOauth: NAVER_OAUTH_URL,\n    // facebookOauth: FACEBOOK_OAUTH_URL,\n    kakaoOauth: KAKAO_OAUTH_URL,\n    googleOauth: GOOGLE_OAUTH_URL\n}\n","import { render } from \"@testing-library/react\";\nimport { saveImage } from \"helpers/electronFileSystem\";\nimport React, { useState, useCallback, useRef, useContext } from \"react\";\nimport { ImageContext } from 'contexts/ImageContext';\nimport \"react-image-crop/dist/ReactCrop.css\";\n\nconst DisplayImage = (props) => {\n  const { imageLib, setImageLib, addImageLib } = useContext(ImageContext);\n\n  const imgRef = useRef(null);\n\n  const onLoad = useCallback((img) => {\n    imgRef.current = img;\n  }, []);\n\n  const toBase64 = file => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = error => reject(error);\n});\n\n  const onImageChange = async event => {\n    const os = window.require('os');\n    if (event.target.files && event.target.files[0]) {\n      let img = event.target.files[0];\n      let folders, name;\n      console.log(\"platform: \",os.platform())\n      if (os.platform() === \"win32\") {\n        folders = img.path.split('\\\\');\n        name = folders[folders.length-2] + \"/\" + folders[folders.length-1];\n      } else {\n        folders = img.path.split('/');\n        name = folders[folders.length-2] + \"/\" + folders[folders.length-1];\n      }\n      \n      console.log(name);\n\n      const binary = await toBase64(img)\n      //saveImage(name, await toBase64(img)); // save binary image to storage\n      props.setSelectedImage(name)\n      addImageLib(name, binary);\n    }\n  };\n\n\n    return (\n      <div>\n        <div>\n          <div>\n            {/* {this.state.image !== null && \n            // <img src={`data:image/jpeg;base64,${this.state.image.substring(24)}`} />\n            <img src={this.state.image} />\n            } */}\n            \n            {/* <h1>Select Image</h1> */}\n            <input type=\"file\" name=\"myImage\" onChange={onImageChange} />\n            {/* <ReactCrop\n              src={upImg}\n              onImageLoaded={onLoad}\n              crop={crop}\n              onChange={(c) => setCrop(c)}\n              onComplete={(c) => setCompletedCrop(c)}\n            /> */}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\nexport default DisplayImage;","import React from \"react\";\nimport { Quill } from \"react-quill\";\n\n// Custom Undo button icon component for Quill editor. You can import it directly\n// from 'quill/assets/icons/undo.svg' but I found that a number of loaders do not\n// handle them correctly\nconst CustomUndo = () => (\n  <svg viewBox=\"0 0 18 18\">\n    <polygon className=\"ql-fill ql-stroke\" points=\"6 10 4 12 2 10 6 10\" />\n    <path\n      className=\"ql-stroke\"\n      d=\"M8.09,13.91A4.6,4.6,0,0,0,9,14,5,5,0,1,0,4,9\"\n    />\n  </svg>\n);\n\n// Redo button icon component for Quill editor\nconst CustomRedo = () => (\n  <svg viewBox=\"0 0 18 18\">\n    <polygon className=\"ql-fill ql-stroke\" points=\"12 10 14 12 16 10 12 10\" />\n    <path\n      className=\"ql-stroke\"\n      d=\"M9.91,13.91A4.6,4.6,0,0,1,9,14a5,5,0,1,1,5-5\"\n    />\n  </svg>\n);\n\n// Undo and redo functions for Custom Toolbar\nfunction undoChange() {\n  this.quill.history.undo();\n}\nfunction redoChange() {\n  this.quill.history.redo();\n}\n\n// Add sizes to whitelist and register them\nconst Size = Quill.import(\"formats/size\");\nSize.whitelist = [\"extra-small\", \"small\", \"medium\", \"large\"];\nQuill.register(Size, true);\n\n// Add fonts to whitelist and register them\nconst Font = Quill.import(\"formats/font\");\nFont.whitelist = [\n  \"arial\",\n  \"comic-sans\",\n  \"courier-new\",\n  \"georgia\",\n  \"helvetica\",\n  \"lucida\"\n];\nQuill.register(Font, true);\n\n// Modules object for setting up the Quill editor\nexport const modules = {\n  toolbar: {\n    container: \"#toolbar\",\n    handlers: {\n      undo: undoChange,\n      redo: redoChange\n    }\n  },\n  history: {\n    delay: 500,\n    maxStack: 100,\n    userOnly: true\n  }\n};\n\n// Formats objects for setting up the Quill editor\nexport const formats = [\n  \"header\",\n  \"font\",\n  \"size\",\n  \"bold\",\n  \"italic\",\n  \"underline\",\n  \"align\",\n  \"strike\",\n  \"script\",\n  \"blockquote\",\n  \"background\",\n  \"list\",\n  \"bullet\",\n  \"indent\",\n  \"link\",\n  \"image\",\n  \"color\",\n  \"code-block\"\n];\n\n// Quill Toolbar component\nexport const QuillToolbar = () => (\n  <div id=\"toolbar\">\n    <span className=\"ql-formats\">\n      {/* <select className=\"ql-font\" defaultValue=\"arial\">\n        <option value=\"arial\">Arial</option>\n        <option value=\"comic-sans\">Comic Sans</option>\n        <option value=\"courier-new\">Courier New</option>\n        <option value=\"georgia\">Georgia</option>\n        <option value=\"helvetica\">Helvetica</option>\n        <option value=\"lucida\">Lucida</option>\n      </select> */}\n      {/* <select className=\"ql-size\" defaultValue=\"medium\">\n        <option value=\"extra-small\">Size 1</option>\n        <option value=\"small\">Size 2</option>\n        <option value=\"medium\">Size 3</option>\n        <option value=\"large\">Size 4</option>\n      </select> */}\n      <select className=\"ql-header\" defaultValue=\"3\">\n        <option value=\"1\">Heading</option>\n        <option value=\"2\">Subheading</option>\n        <option value=\"3\">Normal</option>\n      </select>\n    </span>\n    <span className=\"ql-formats\">\n      <button className=\"ql-bold\" />\n      <button className=\"ql-italic\" />\n      <button className=\"ql-underline\" />\n      <button className=\"ql-strike\" />\n    </span>\n    <span className=\"ql-formats\">\n      <button className=\"ql-list\" value=\"ordered\" />\n      <button className=\"ql-list\" value=\"bullet\" />\n      <button className=\"ql-indent\" value=\"-1\" />\n      <button className=\"ql-indent\" value=\"+1\" />\n    </span>\n    <span className=\"ql-formats\">\n      <button className=\"ql-script\" value=\"super\" />\n      <button className=\"ql-script\" value=\"sub\" />\n      <button className=\"ql-blockquote\" />\n      <button className=\"ql-direction\" />\n    </span>\n    <span className=\"ql-formats\">\n      <select className=\"ql-align\" />\n      <select className=\"ql-color\" />\n      <select className=\"ql-background\" />\n    </span>\n    <span className=\"ql-formats\">\n      <button className=\"ql-link\" />\n      <button className=\"ql-image\" />\n      <button className=\"ql-video\" />\n    </span>\n    <span className=\"ql-formats\">\n      <button className=\"ql-formula\" />\n      {/* <button className=\"ql-code-block\" /> */}\n      <button className=\"ql-clean\" />\n    </span>\n    <span className=\"ql-formats\">\n      <button className=\"ql-undo\">\n        <CustomUndo />\n      </button>\n      <button className=\"ql-redo\">\n        <CustomRedo />\n      </button>\n    </span>\n  </div>\n);\n\nexport default QuillToolbar;\n","import React from \"react\";\nimport ReactQuill from \"react-quill\";\nimport EditorToolbar, { modules, formats } from \"./EditorToolbar\";\nimport \"react-quill/dist/quill.snow.css\";\n\nexport const Editor = (props) => {\n  return (\n    <div className=\"text-editor\">\n      <EditorToolbar />\n      <ReactQuill\n        value={props.text || ''}\n        onChange={props.handleChange}\n        onFocus={props.handleFocus}\n        onBlur={props.handleBlur}\n        placeholder={props.placeholder}\n        modules={modules}\n        formats={formats}\n        theme=\"snow\"\n        style={{height:\"250px\"}}\n      />\n    </div>\n  );\n};\n\nexport default Editor;\n","import React, { useState, useContext, useEffect, useCallback, useMemo } from 'react';\nimport '../assets/sass/Button.scss';\nimport classNames from 'classnames';\n\nconst Button = ({children, size, color, ref, fullWidth, fullHeight, autoHeight, style, className, displayNoneMobile, noRadius, hoverDisabled, outline, circled, active, noWrap, ...rest}) => {\n    const buttonEl = ref\n    return (\n        <button {...rest} style={style} className={classNames('Button', size, color, className, {fullWidth}, {fullHeight}, {autoHeight}, {displayNoneMobile}, {circled}, {outline}, {noRadius}, {hoverDisabled}, {active}, {noWrap})}>\n            {children}\n        </button>\n    )\n}\n\nButton.defaultProps = {\n    size: 'medium',\n    color: 'topolar',\n    style: null,\n    className: \"\"\n}\n\nexport default React.memo(Button);","import React, { useState } from 'react';\nimport classNames from \"classnames\";\n\nexport const Field = (props) => {\n\n    const [fieldinput, setFieldinput] = useState(false);\n    const doubleClick = () => {\n        setFieldinput(true);\n    }\n\n    const blurClick = () => {\n        setFieldinput(false);\n    }\n\n    return (\n      <div className=\"fieldfix\">\n        {\n            fieldinput ?\n            <textarea value = {props.value} onChange = {props.inputChange} onBlur = {blurClick} autoFocus rows=\"3\" cols=\"40\"/>\n            :\n            <div onDoubleClick = {doubleClick} className=\"fieldchange\">\n              {props.value === \"\" ? \"입력하세요\" : props.value}\n            </div>\n        }\n        {props.children}\n      </div>\n    )\n  }\n\n\nexport default Field;\n\n","import React from 'react';\n\nexport const CodeLanguageSelectBox = (props) => {\n\n  const handleChange = (e) => {\n\t\t// event handler\n\t\tconsole.log(e.target.value);\n    props.setCodeLanguage(e.target.value);\n\t};\n\n\n\treturn (\n\t\t<select onChange={handleChange}>\n\t\t\t{props.options.map((option) => (\n\t\t\t\t<option\n\t\t\t\t\tvalue={option.value}\n\t\t\t\t\tdefaultValue={props.defaultValue === option.value}\n\t\t\t\t>\n\t\t\t\t\t{option.name}\n\t\t\t\t</option>\n\t\t\t))}\n\t\t</select>\n\t);\n};","import React, {useEffect, useMemo, useContext} from 'react'\nimport DisplayImage from './DisplayImage';\nimport reactHtmlParser from 'react-html-parser';\nimport { ImageContext } from 'contexts/ImageContext';\n\nexport const ImageContent = ({components_item, index, hoverItemIndex, setHoverItemIndex, loadImage, count_for_key, selectedImage, setSelectedImage, ButtonGroup}) => {\n  const { imageLib, setImageLib, addImageLib } = useContext(ImageContext);\n  //const image = useMemo(()=>loadImage(components_item.src),[components_item]);\n  console.log(\"image rerenderd\")\n  const image = useMemo(()=>imageLib.get(components_item.src),[components_item, imageLib]);\n  // console.log(\"dirname : \",__dirname)\n  return (\n    <div key={components_item.src+count_for_key} onMouseEnter={() => {setHoverItemIndex(index)}} onMouseLeave={() => {setHoverItemIndex(null)}}>\n      {/* <div\n          style={{\n            backgroundSize: 'contain',\n            backgroundPosition: 'center',\n            backgroundRepeat: 'no-repeat',\n            backgroundImage: `url('file://Users/eui-chan/Documents/tonysCoding/textbook_editor2/src/textbook/${components_item.src}')`,\n          }}\n          className=\"full-screen-img\"\n        /> */}\n        {image === null || image === undefined ? \n        <>\n        <h6>이미지를 찾을 수 없음 {components_item.src}</h6>\n        <h6>{components_item.src} 선택하여 업로드 : </h6>\n        <DisplayImage selectedImage={selectedImage} setSelectedImage={setSelectedImage}/>\n        </> :\n        <img src={image} alt={components_item.name}/>\n        }\n        {/* <img src={URL.createObjectURL(\"/Users/eui-chan/Documents/tonysCoding/textbook_simulator_edited/textbook/dino1/fillRect.png\")} alt={components_item.name} width=\"300px\" height=\"300px\"/> */}\n        {/* <img src={require(\"../../textbook/\"+components_item.src)} alt={components_item.name}/> */}\n        {/* <DisplayImage src={\"/Users/eui-chan/Documents/tonysCoding/textbook_simulator_edited/textbook/dino1/fillRect.png\"}/> */}\n        {/* <RenderImage src={\"file://Users/eui-chan/Documents/tonysCoding/textbook_simulator_edited/textbook/dino1/fillRect.png\"}/> */}\n        \n        {/* <button onClick={readFile}>이미지 저장</button> */}\n        {/* <button onClick={selectFolder}>선택2</button> */}\n        <br />\n        <b> {reactHtmlParser(components_item.name? components_item.name:null)} </b>\n        <br />\n        {hoverItemIndex === index && <ButtonGroup index={index}/>}\n        \n    </div> \n  );\n}","import React, {useEffect, useMemo, useState} from 'react'\nimport { ImageContext } from 'contexts/ImageContext';\nimport Markdown from 'react-markdown';\nimport rehypeRaw from 'rehype-raw';\n\nexport const DescContent = ({components_item, index, hoverItemIndex, setHoverItemIndex, count_for_key, ButtonGroup}) => {\n  console.log(\"desc rerenderd\");\n  // const { imageLib, setImageLib, addImageLib } = useContext(ImageContext);\n  //const image = useMemo(()=>loadImage(components_item.src),[components_item]);\n  // console.log(\"dirname : \",__dirname)\n  return (\n    <div className={\"body-desc\"} key={components_item.description+count_for_key} onMouseEnter={() => {setHoverItemIndex(index)}} onMouseLeave={() => {setHoverItemIndex(null)}}>\n        <div>\n            <Markdown children={components_item.description} rehypePlugins={[rehypeRaw]} />\n        </div>\n        {hoverItemIndex === index && <ButtonGroup index={index}/>}\n        \n    </div>\n  );\n}\n","import { useEffect, useRef } from 'react';\n\nconst useInterval = (callback, delay) => {\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\nexport default useInterval;","import React, { useCallback, useEffect, useRef, useState, useContext, useMemo } from 'react';\nimport 'assets/sass/Curriculum/TextbookBrowser.scss'\nimport { API_URL, API_PROTOCOL } from '../../config';\nimport reactHtmlParser from 'react-html-parser';\n\nimport {Prism as SyntaxHighlighter} from 'react-syntax-highlighter'\nimport {materialDark, materialLight, vs, duotoneLight} from 'react-syntax-highlighter/dist/esm/styles/prism'\n\nimport Markdown from 'react-markdown';\nimport rehypeRaw from 'rehype-raw';\nimport gfm from 'remark-gfm';\n\nimport {RenderImage} from './RenderImage';\nimport DisplayImage from './DisplayImage';\nimport {saveImage, loadImage} from '../../helpers/electronFileSystem'\nimport { TextbookContext } from 'contexts/TextbookContext';\n\nimport Editor from 'components/textbooks/Editor';\nimport CustomToolbar from 'components/textbooks/CustomToolbar'\n\nimport Button from 'components/Button';\nimport { Field } from 'components/textbooks/Field';\nimport { CodeLanguageSelectBox } from './CodeLanguageSelectBox';\n\nimport { ImageContent } from 'components/textbooks/ImageContent';\nimport { DescContent } from 'components/textbooks/DescContent';\n\nimport useInterval from 'helpers/useInterval';\nconst URL = API_PROTOCOL + API_URL;\n\nconst TextbookContentView = ({\n    data,\n    JSONLoading,\n    stepIndex,\n\n}) =>{\n    // const [image, setImage] = useState(null);\n    const[text, setText] = useState(\"\");\n    const[code, setCode] = useState(\"더블클릭하여 code 입력\");\n    const[codeLanguage, setCodeLanguage] = useState(\"python\");\n    const[selectedImage, setSelectedImage] = useState(null);\n    const [hoverItemIndex, setHoverItemIndex] = useState(null);\n    const[imageModalVisible, setImageModalVisible] = useState(false);\n    const { addDescription, addImage, addCode, addTable, deleteDescription } = useContext(TextbookContext);\n\n    const [ isEditing, setIsEditing ] = useState(false);\n    const [ lastText, setLastText ] = useState('');\n    const [ lastparseData, setLastParseData ] = useState(null);\n\n    useEffect(() => {\n      console.log(\"selectedImageName : \", selectedImage);\n    },[selectedImage])\n\n    useEffect(() => {\n      setLastParseData(parseData(data));\n    },[])\n\n    useInterval(() => {\n      console.log(\"lastText: \",  lastText);\n      console.log(\"Text: \", text);\n\n      if (lastText != text) {\n        setIsEditing(true);\n      } else {\n        setIsEditing(false);\n      }\n      setLastText(text);\n    }, 1000);\n\n      // const files = fs.readdirSync(dir)\n\n      // for (const file of files) {\n      //   console.log(file)\n      // }\n    \n\n    const selectFolder = async () => {\n      const dirHandle = await window.showDirectoryPicker();\n      console.log(dirHandle);\n    }\n\n    const handleCode = (e) => {\n      setCode(e.currentTarget.value);\n    }\n\n    const handleText = (newText) => {\n      setText(newText);\n    }\n\n    const handleFocus = () => {\n      setLastParseData(parseData(data));\n      setIsEditing(true);\n    }\n    \n    const handleBlur = () => {\n      setLastParseData(parseData(data));\n      setIsEditing(false);\n    }\n\n    const ButtonGroup = ({index}) => (\n      <div className={\"body-buttonGroup\"}>\n        <Button size=\"small\" type=\"fill\" color=\"black\" onClick={()=>{\n          addDescription(index+1, text);\n          setLastParseData(parseData(data));\n        }}>desc 추가</Button>\n        {/* <Button size=\"small\" type=\"fill\" color=\"black\" onClick={()=>{addImage(index+1, selectedImage)}}>image 추가</Button> */}\n        <Button size=\"small\" type=\"fill\" color=\"black\" onClick={()=>{\n          addCode(index+1, code, codeLanguage);\n          setLastParseData(parseData(data));\n        }}>code 추가</Button>\n        {/* <Button size=\"small\" type=\"fill\" color=\"black\" onClick={()=>{addTable(index+1, text)}}>table 추가</Button> */}\n        {index > -1 && <Button size=\"small\" type=\"fill\" color=\"red\" onClick={()=>{\n          deleteDescription(index);\n          setLastParseData(parseData(data));\n        }}>제거</Button>}\n        \n      </div>\n      \n    )\n\n    const parseData = (data) =>{\n        const {title, components, description_title} = data;\n\n        let count_for_key = 0;\n\n        const step_item_descriptions = (components && components.length>0)?components.map((components_item, index)=>{\n            count_for_key += 1;\n            let type = components_item.type;\n            if (type === \"desc\"){\n                count_for_key += 1;\n                return (\n                  <>\n                    <DescContent\n                      components_item={components_item} \n                      index={index} \n                      hoverItemIndex={hoverItemIndex}\n                      setHoverItemIndex={setHoverItemIndex} \n                      count_for_key={count_for_key} \n                      ButtonGroup={ButtonGroup}\n                    />\n                  </>\n                    // <div className={\"body-desc\"} key={components_item.description+count_for_key} onMouseEnter={() => {setHoverItemIndex(index)}} onMouseLeave={() => {setHoverItemIndex(null)}}>\n                    //     <div>\n                    //         <Markdown children={components_item.description} rehypePlugins={[rehypeRaw]} />\n                    //     </div>\n                    //     {hoverItemIndex === index && <ButtonGroup index={index}/>}\n                        \n                    // </div>\n                );\n            }\n            else if (type === \"table\"){\n                count_for_key += 1;\n                return(\n                <div className={\"body-table\"} key={components_item.description+count_for_key} onMouseEnter={() => {setHoverItemIndex(index)}} onMouseLeave={() => {setHoverItemIndex(null)}}>\n                    <Markdown \n                        children={components_item.description} \n                        remarkPlugins={[[gfm, {borderWidth: \"1px\"}]]}\n                    />\n                    {hoverItemIndex === index && <ButtonGroup index={index}/>}\n                </div>\n                );\n            }\n            else if (type === \"code\"){\n                count_for_key += 1;\n                return (\n                    <div className={\"body-code\"} key={components_item.code+count_for_key} onMouseEnter={() => {setHoverItemIndex(index)}} onMouseLeave={() => {setHoverItemIndex(null)}}>\n                    <Markdown\n                        children={components_item.code}\n                        components={{\n                        code({node, inline, className, children, ...props}) {\n                            const match = /language-(\\w+)/.exec(className || '')\n                            return !inline && match ? (\n                            <SyntaxHighlighter\n                                children={String(children).replace(/\\n$/, '')}\n                                style={materialLight}\n                                language={match[1]}\n                                PreTag=\"div\"\n                                {...props}\n                            />\n                            ) : (\n                            <code className={className} {...props}>\n                                {children}\n                            </code>\n                            )\n                        }\n                        }}\n                    />\n                    {hoverItemIndex === index && <ButtonGroup index={index}/>}\n                    </div>\n                );\n            }\n            else if (type === \"image\") {\n                count_for_key += 1;\n                return (\n                  <>\n                  <ImageContent\n                    components_item={components_item} \n                    index={index} \n                    hoverItemIndex={hoverItemIndex}\n                    setHoverItemIndex={setHoverItemIndex} \n                    loadImage={loadImage} \n                    count_for_key={count_for_key} \n                    selectedImage={selectedImage} \n                    setSelectedImage={setSelectedImage}\n                    ButtonGroup={ButtonGroup}\n                  />\n                  \n                  </>\n                )\n            }\n        }):null;\n        \n        const card1 = (\n            <div className={\"textbook-container\"}>\n                <div className={\"textbook-header\"}>\n                    <div className={\"textbook-title\"}> \n                    {title}\n                    </div>\n                </div>\n                \n                <div className=\"textbook-body\">\n                <ButtonGroup index={-1}/>\n                    {reactHtmlParser(description_title)}\n                    {step_item_descriptions}\n                </div>\n            </div>\n        );\n        return (\n            <div>\n                {card1}\n            </div>\n                \n        );\n    }\n\n    if (JSONLoading){\n        return null;\n    }\n    if (!data){\n        return null;\n    }\n    const OPTIONS = [\n      { value: \"python\", name: \"python\" },\n      { value: \"cpp\", name: \"cpp\" },\n      { value: \"java\", name: \"java\" },\n      { value: \"javascript\", name: \"javascript\" },\n    ];\n    \n    return (\n        <div className=\"textbook-content-view\">\n            {/* <Modal isOpen={imageModalVisible} toggle={setImageModalVisible} subHeader=\"b\" header=\"a\">\n              <DisplayImage selectedImage={selectedImage} setSelectedImage={setSelectedImage}/>\n            </Modal> */}\n            \n            {isEditing ? lastparseData : parseData(data)}\n            <div style={{marginTop: \"50px\"}}>\n              <hr></hr>\n              {/* 이미지 선택 : \n              <DisplayImage selectedImage={selectedImage} setSelectedImage={setSelectedImage}/>\n              <hr></hr> */}\n              {/* <CustomToolbar/> */}\n              <Editor placeholder={\"이곳에 desc 입력\"} text={text} handleChange={handleText} handleFocus={handleFocus} handleBlur={handleBlur} />\n              <hr></hr>\n              <CodeLanguageSelectBox options={OPTIONS} defaultValue=\"python\" setCodeLanguage={setCodeLanguage}></CodeLanguageSelectBox>;\n              <Field\n                value={code}\n                inputChange={handleCode}\n                active = {code}\n              />\n              <br></br>\n            </div>\n        </div>\n    )\n\n}\n\nexport default TextbookContentView","import React, { useCallback, useEffect, useRef, useState, useMemo, useReducer } from 'react';\n\n// import { useSelector, useDispatch, shallowEqual } from 'react-redux';\n// import useApi from 'components/Hooks/useApi';\n\n// import { getTextbook, getJSONTextbook } from 'redux/actions/api_textbook';\n// import { getMyStudentInfo } from 'redux/actions/api_studentinfo';\n// import { API_URL, CLASSROOM_ENTRY_TIME_BUFFER, SOC_PROTOCOL } from \"../../../config\";\n\nimport 'assets/sass/Curriculum/TextbookSidebar.scss';\nimport 'assets/sass/Classroom/NewClassroom.scss';\nimport ToolBar from \"./ToolBar\";\nimport ClassroomFooter from \"./ClassroomFooter\";\nimport ClassroomHeader from \"./ClassroomHeader\";\n\n\nimport TextbookSidebar from 'components/textbooks/TextbookSidebar';\n//import { showToast } from 'helpers/toast';\nimport TextbookContentView from 'components/textbooks/TextbookContentView';\n\nimport { DefaultTextbook }  from \"./DefaultTextbook\";\n//import ClassroomEventPopup from '../ClassroomEventPopup';\n\nimport { TextbookContext } from \"contexts/TextbookContext\";\nimport { ImageContext } from \"contexts/ImageContext\";\n\nimport { saveTextbook, loadTextbook } from \"helpers/electronFileSystem\";\n\nimport tutorial from \"textbook/Textbook_lv0_0_tutorial/Textbook_lv0_0_tutorial.json\";\n\nconst NewClassroom = () =>{\n    //===========================================USE API=============================================//\n    // const [StudentInfoLoading, StudentInfoResolved, StudentInfoError, getStudentInfo] = useApi(getMyStudentInfo);\n    // const [TextbookLoading, Textbook, TextbookError, getCurrentTextbook] = useApi(getTextbook);\n    // const [JSONLoading, JSONBook, JSONError, getJSONBook] = useApi(getJSONTextbook);\n    \n    //===========================================USE SELECTOR=============================================//\n    // const studentInfo = useSelector(state=>state.api_studentinfo.studentinfo)\n    // const auth = useSelector(state => state.auth, shallowEqual);\n    // const textbook = useSelector(state => state.api_textbook.textbook, shallowEqual);\n\n    //===========================================USE STATE=============================================//\n    \n    const [Textbook, setTextbook] = useState(null);\n\n    const [sidebarOpen, setSidebarOpen] = useState(false);\n\n    const [stepIndicator, setStepIndicator] = useState(0);\n    const [stepsList, setStepsList] = useState([]);\n    const [stepsListLength, setStepsListLength] = useState(null);\n    \n    const [JSONBook, setJSONBook] = useState(tutorial);\n\n    const [stepIndex, setStepIndex] = useState(0);\n    const [itemIndex, setItemIndex] = useState(0);\n    const [ignored, forceUpdate] = useReducer(x => x + 1, 0);\n\n    const [imageLib, setImageLib] = useState(new Map());\n\n    //===========================================USE EFFECT=============================================//\n    // useEffect(()=>{\n    //     if(!studentInfo){\n    //         getStudentInfo();\n    //     }\n    //     // setDefaultJSON()\n    // },[]);\n\n    // useEffect(()=>{\n    //     if(studentInfo && studentInfo.current_textbook){\n    //         setTextbookId(studentInfo.current_textbook.id);\n    //         getJSONBook(studentInfo.current_textbook.file);\n    //         setLastTextbook(studentInfo.current_textbook);\n    //     }\n    //     else if (studentInfo && !studentInfo.current_textbook){\n    //         getCurrentTextbook(0);\n    //     }\n    // },[JSON.stringify(studentInfo)])\n\n    // useEffect(()=>{\n    //     if(TextbookError){\n    //         showToast('', TextbookError, 'danger')\n    //     }\n    // },[TextbookError])\n    \n    // useEffect(()=>{\n    //     if(Textbook){\n    //         if(Textbook.file.textbook_type !==2){\n    //             //showToast('', \"지원하지 않는 교재 형식입니다\", 'danger');\n    //         }\n    //         else{\n    //             setTextbookId(Textbook.id);\n    //             getJSONBook(Textbook.file.id);\n    //             if(fromTeacherTrigger){\n    //                 setLastTextbook(Textbook);\n    //                 setStepIndicator(0);\n    //                 setTrigger(false);\n    //             }\n    //         }\n    //     }\n    // },[JSON.stringify(Textbook)])\n\n    const movePage = () => {\n      let steps_list = [];\n      JSONBook.textbook_contents.forEach((step)=>{\n      //JSONBook.textbook_content.textbook_contents.forEach((step)=>{\n          steps_list = steps_list.concat(step.step_items);\n      });\n      setStepsList(steps_list);\n      setStepsListLength(steps_list.length);\n    }\n    \n    useEffect(()=>{\n      movePage();\n      forceUpdate();\n    },[stepIndicator, JSONBook])\n\n    //===========================================FUNCTIONS=============================================//\n\n    // const textbookOnClick = (info)=>{\n    //     if (info.textbook_id&&(info.textbook_id!==textbookId)){\n    //         setStepIndicator(0);\n    //         setStepsList([]);\n    //         getCurrentTextbook(info.textbook_id);\n    //     }\n    // }\n\n    // const setDefaultJSON = () =>{\n        // TO DO IN FUTURE\n    // }\n\n\n\n    // if (!studentInfo){\n    //     return null;\n    // }\n\n    const setIndex = (stepIndex, itemIndex) => {\n      setStepIndex(stepIndex);\n      setItemIndex(itemIndex);\n    }\n\n    const addStep = (stepTitle, stepIndex) => {\n      let newBook = JSONBook;\n      for(let i = stepIndex; i < newBook.textbook_contents.length; i++) {\n        newBook.textbook_contents[i].step_no = i+1;\n      }\n\n      newBook.textbook_contents.splice(stepIndex, 0, {\n        \"step_title\": stepTitle,\n        \"step_no\": stepIndex,\n        \"step_items\": []\n      })\n      console.log(newBook)\n\n      setJSONBook(newBook);\n      saveTextbook(newBook);\n      forceUpdate();\n    }\n\n    const addItem = (itemTitle, stepIndex, itemIndex) => {\n      let newBook = JSONBook;\n      newBook.textbook_contents[stepIndex].step_items.splice(itemIndex, 0, {\n        \"title\": itemTitle,\n        \"tags\": [],\n        \"collapse\": false,\n        \"components\": []\n      })\n\n      console.log(newBook)\n\n      setJSONBook(newBook);\n      saveTextbook(newBook);\n      forceUpdate();\n    }\n\n    const deleteStep = (stepIndex) => {\n      let newBook = JSONBook;\n      for(let i = stepIndex+1; i < newBook.textbook_contents.length; i++) {\n        newBook.textbook_contents[i].stepIndex = i-1;\n      }\n\n      newBook.textbook_contents.splice(stepIndex, 1)\n      console.log(newBook)\n\n      setJSONBook(newBook);\n      saveTextbook(newBook);\n      forceUpdate();\n    }\n\n    const deleteItem = (stepIndex, itemIndex) => {\n      let newBook = JSONBook;\n      newBook.textbook_contents[stepIndex].step_items.splice(itemIndex, 1)\n\n      console.log(newBook)\n\n      setJSONBook(newBook);\n      saveTextbook(newBook);\n      forceUpdate();\n    }\n\n    const addDescription = (index, text) => {\n      let newBook = JSONBook;\n      newBook.textbook_contents[stepIndex].step_items[itemIndex].components.splice(index, 0, {\n        \"type\": \"desc\",\n        \"description\": text\n      })\n\n      console.log(newBook)\n\n      setJSONBook(newBook);\n      saveTextbook(newBook);\n      forceUpdate();\n    }\n\n    const addImage = (index, name) => {\n      let newBook = JSONBook;\n      if(name === null) {\n        return\n      }\n      newBook.textbook_contents[stepIndex].step_items[itemIndex].components.splice(index, 0, {    \n        \"type\": \"image\",\n        \"name\": \"\",\n        \"src\": name\n      })\n\n      console.log(newBook)\n\n      setJSONBook(newBook);\n      saveTextbook(newBook);\n      forceUpdate();\n    }\n\n    const addCode = (index, text, language) => {\n      let newBook = JSONBook;\n      newBook.textbook_contents[stepIndex].step_items[itemIndex].components.splice(index, 0, {\n        \"type\": \"code\",\n        \"code\": \"~~~\" + language + \" \\n\" + text + \"\\n ~~~\"\n      })\n\n      console.log(newBook)\n\n      setJSONBook(newBook);\n      saveTextbook(newBook);\n      forceUpdate();\n    }\n\n    const addTable = (index) => {\n      let newBook = JSONBook;\n    }\n\n    const deleteDescription = (index) => {\n      let new_textbook = JSONBook\n      new_textbook.textbook_contents[stepIndex].step_items[itemIndex].components.splice(index,1);\n      setTextbook(new_textbook);\n      forceUpdate();\n    }\n\n    const addImageLib = (key, value) => {\n      console.log(\"image added\", key);\n      setImageLib((prev) => new Map([...prev, [key, value]]));\n    };\n\n    const textbookContextValue = useMemo(() => ({ \n      stepIndex, itemIndex, setIndex, addDescription, addImage, addCode, addTable, deleteDescription, addStep, deleteStep, addItem, deleteItem}\n      ), [stepIndex, itemIndex, setIndex, , addImage, addCode, addTable, deleteDescription, addStep, deleteStep, addItem, deleteItem]);\n\n    const imageContextValue = useMemo(() => ({ \n      imageLib, setImageLib, addImageLib\n    }),[imageLib, setImageLib, addImageLib]);\n\n    if(stepsList.length === 0) {\n      return null;\n    }\n    return (\n        <>\n        {/* {screenSize==='desktop' && \n        <ClassroomEventPopup\n            isOpen={isCouponModalOpen}\n            toggle={()=>setIsCouponModalOpen(!isCouponModalOpen)}\n        >\n        </ClassroomEventPopup>\n        } */}\n            \n            <div className=\"new-classroom fit-app\">\n                {/* <ClassroomHeader firstName={\"교재 제작 툴\"}/> */}\n                <ImageContext.Provider value={imageContextValue}>\n                  <TextbookContext.Provider value={textbookContextValue}>\n                    <TextbookSidebar \n                        toggleSidebar={setSidebarOpen}\n                        textbookOnClickCallback={null}\n                        isOpen = {sidebarOpen}\n                        currentTextbook = {Textbook}\n                        JSONBook = {JSONBook}\n                        setJSONBook = {setJSONBook}\n                        stepIndicator = {stepIndicator}\n                        setStepIndicator = {setStepIndicator}\n                        lastTextbook={Textbook}/>\n                    <div className=\"classroom-textbook-header\">\n                        <span onClick={()=>{setSidebarOpen(true)}} className=\"material-icons-outlined textbook-sidebar-toggle\">open</span>\n                        {Textbook? Textbook.name : null}\n                    </div>\n                    {/* <ToolBar history={null} getTextbook={null} setTrigger={setTrigger} toggleCouponModal={()=>setIsCouponModalOpen(!isCouponModalOpen)} /> */}\n                    <ClassroomFooter maxIndex={stepsListLength} stepIndicator={stepIndicator} setStepIndicator={setStepIndicator}/>\n                    {<TextbookContentView JSONLoading={false} data={stepsList? stepsList[stepIndicator] : null} />}\n                    \n                  </TextbookContext.Provider>\n                </ImageContext.Provider>\n            </div>\n        </>\n    )\n}\n\nexport default NewClassroom","import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport NewClassroom from 'components/classroom'\n\nfunction App() {\n  return (\n    // <div className=\"App\">\n    //   <header className=\"App-header\">\n    //     <img src={logo} className=\"App-logo\" alt=\"logo\" />\n    //     <p>\n    //       Edit <code>src/App.tsx</code> and save to reload.\n    //     </p>\n    //     <a\n    //       className=\"App-link\"\n    //       href=\"https://reactjs.org\"\n    //       target=\"_blank\"\n    //       rel=\"noopener noreferrer\"\n    //     >\n    //       Learn React!!!\n    //     </a>\n    //   </header>\n    // </div>\n    <NewClassroom/>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}